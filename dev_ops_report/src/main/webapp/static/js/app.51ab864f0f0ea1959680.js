webpackJsonp([1],{NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("tvR6");var i=a("qBF2"),o=a.n(i),l=a("7+uW"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var n=a("VU/8")({name:"App"},s,!1,function(t){a("kZ0m")},null,null).exports,r=a("/ocq"),u={name:"HelloWorld",data:function(){return{pageShow:!0,dialogFormVisible:!1,dialogFormVisible1:!1,dialogFormVisible2:!1,dialogFormCharts:!1,pageInfo:{page:1,size:6,count:0},isDisabled:!1,progress:["","已完成","进行中","延期","延期进行中"],queryMsg:"",tableData1:[],tableData:[],optionsTime:[{value:"2018",label:"2018"},{value:"2017",label:"2017"},{value:"2016",label:"2016"}],optionsBig:[],optionsSmall:[],options:[],samllValue:"",bigValue:"",timeValue:"",top5Name:[],top5Data1:[],top5Data2:[],top5Data3:[],top5Data4:[],top5Data5:[],bigtop5Name:[],bigtop5Data1:[],bigtop5Data2:[],bigtop5Data3:[],bigtop5Data4:[],bigtop5Data5:[],roundData1:[],roundData2:[],roundData3:[],roundData4:[],roundData:"",color1:0,color2:0,color3:0,color4:0,bigValue1:"",samllValue1:"",years1:"",status:0,type:0}},methods:{bigProject:function(){var t=this;this.bigValue&&(this.optionsSmall=[],this.samllValue="",this.options.map(function(e,a){e.id===t.bigValue&&""!=e.label&&t.optionsSmall.push(e)}),this.isDisabled=!0)},changeTime:function(){},samllProject:function(){},sureQuery:function(){this.bigValue&&this.timeValue;var t={pid:this.bigValue,sub_pid:this.samllValue,years:this.timeValue};this.bigValue1=this.bigValue,this.samllValue1=this.samllValue,this.years1=this.timeValue,this.way1(t),this.way2(t)},messAge:function(){this.$message({duration:1e3,message:"查询不能为空！！！"})},filterA:function(){var t=(this.pageInfo.page-1)*this.pageInfo.size;this.pageInfo.count=this.tableData.length,this.tableData1=this.tableData.slice(t,t+this.pageInfo.size)},jumpTo:function(t){this.pageInfo.page=t,this.filterA()},filterProgress:function(t){return this.progress[t]},sendMsg:function(t,e,a,i){var o=this;if(this.pageInfo={page:1,size:6,count:0},i){this.pageShow=a;var l=e;this.$http.post(t,l).then(function(t){o.tableData=[],console.log(t.data.data),t.data.data.map(function(t,e){o.tableData.push(t)}),o.filterA()}).catch(function(t){console.log("出现错误！！！")}),this.filterProgress()}else this.messAge()},queryData:function(){var t={demand:this.queryMsg};this.sendMsg("http://10.1.41.99:8080/requirement/query",t,!1,this.queryMsg),this.dialogFormVisible1=!0},drawRound:function(){var t=this,e=this,a=this.$echarts.init(document.getElementById("myChart"));a.setOption({title:{text:"版本进度",textStyle:{color:"#666666",fontSize:12}},legend:{data:["已完成版本数  "+this.roundData1,"进行中版本数  "+this.roundData2,"延期完成版本数  "+this.roundData3,"延期进行版本数  "+this.roundData4],top:30,itemWidth:15,itemHeight:10,textStyle:{color:"#707070",fontSize:8}},grid:{z:1,show:!1,left:"-30%",right:"4%",bottom:"3%",containLabel:!0,splitLine:{show:!1}},xAxis:[{type:"category",data:[],axisLine:{show:!1},splitLine:{show:!1},splitArea:{interval:"auto",show:!1}}],yAxis:[{type:"value",axisLine:{show:!1},splitLine:{show:!1}}],series:[{name:"刻度盘",type:"gauge",startAngle:220,endAngle:-40,center:["50%","70%"],z:3,radius:"80%",axisLine:{lineStyle:{width:20,color:[[this.color1,"#91c7ae"],[this.color2,"#63869e"],[this.color3,"#fdaa29"],[this.color4,"#f1705c"]]}},splitLine:{length:20,lineStyle:{color:"#ffffff"}},pointer:{show:!0,length:"60%",width:5},title:{show:!0,offsetCenter:["0","20"],textStyle:{color:"#444A56",fontSize:12,fontFamily:"Microsoft YaHei"}},detail:{textStyle:{fontSize:12,color:"#707070"},formatter:"{value}%"},data:[{value:this.roundData,name:"正常版本"}]},{name:"进行中版本数  "+this.roundData2,type:"bar",barWidth:"60%",data:[0],itemStyle:{normal:{color:"#63869e"}}},{name:"已完成版本数  "+this.roundData1,type:"bar",barWidth:"60%",data:[0],itemStyle:{normal:{color:"#91c7ae"}}},{name:"延期完成版本数  "+this.roundData3,type:"bar",barWidth:"60%",data:[0],itemStyle:{normal:{color:"#fdaa29"}}},{name:"延期进行版本数  "+this.roundData4,type:"bar",barWidth:"60%",data:[0],itemStyle:{normal:{color:"#f1705c"}}}]}),a.on("legendselectchanged",function(a){a.name==="已完成版本数  "+e.roundData1&&(e.status=1),a.name==="进行中版本数  "+t.roundData2&&(e.status=2),a.name==="延期完成版本数  "+t.roundData3&&(e.status=3),a.name==="延期进行版本数  "+t.roundData4&&(e.status=4);var i={pid:e.bigValue1,sub_pid:e.samllValue1,years:e.years1,status:e.status};e.sendMsg("http://10.1.41.99:8080/detail/progress",i,!0,!0),t.dialogFormVisible=!0})},drawLine:function(){var t=this,e=this,a=this.$echarts.init(document.getElementById("myCharts")),i={title:{text:"版本成本+质量(TOP5)",textStyle:{color:"#666666",fontSize:12}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{top:30,textStyle:{fontSize:8,color:"#666666"},itemGap:3,itemWidth:15,itemHeight:10,data:["代码质量分析(个数)","现网缺陷(个数)","系统测试缺陷(个数)","单元测试覆盖率(百分比)","投入工时总数"]},grid:{top:"25%",left:"3%",right:"4%",bottom:"1%",containLabel:!0},xAxis:[{type:"category",data:this.top5Name,axisPointer:{textStyle:{fontSize:6},type:"shadow"},axisLine:{lineStyle:{}},axisLabel:{interval:0,rotate:40,textStyle:{fontSize:8}}}],yAxis:[{type:"value",name:"个数",nameGap:8,axisLabel:{textStyle:{fontSize:10},formatter:"{value}"},splitLine:{lineStyle:{type:"dotted"}},axisLine:{lineStyle:{width:.5}},nameTextStyle:{fontSize:10}},{type:"value",name:"百分比",nameGap:8,axisLabel:{textStyle:{fontSize:10},formatter:"{value}%"},splitLine:{show:!1},nameTextStyle:{fontSize:10},axisLine:{lineStyle:{width:.5}}}],series:[{name:"投入工时总数",type:"bar",barWidth:15,color:"#91c7ae",data:this.top5Data5},{name:"单元测试覆盖率(百分比)",type:"line",yAxisIndex:1,itemStyle:{normal:{lineStyle:{width:2,color:"#a9c584"}}},data:this.top5Data4},{name:"系统测试缺陷(个数)",type:"line",yAxisIndex:1,itemStyle:{normal:{lineStyle:{width:2,color:"#57a8e7"}}},data:this.top5Data3},{name:"现网缺陷(个数)",type:"line",yAxisIndex:1,itemStyle:{normal:{lineStyle:{width:2,color:"#f1705c"}}},data:this.top5Data2},{name:"代码质量分析(个数)",type:"line",yAxisIndex:1,itemStyle:{normal:{lineStyle:{width:2,color:"#ac8cbf"}}},data:this.top5Data1}]};a.setOption(i),a.on("legendselectchanged",function(a){if("代码质量分析(个数)"===a.name){var i={pid:e.bigValue1,sub_pid:e.samllValue1,years:e.years1};e.sendMsg("http://10.1.41.99:8080/detail/code_analysis",i,!0,!0),t.dialogFormVisible=!0}if("现网缺陷(个数)"===a.name){e.type=1;var o={pid:e.bigValue1,sub_pid:e.samllValue1,years:e.years1,type:e.type};e.sendMsg("http://10.1.41.99:8080/detail/bugs",o,!0,!0),t.dialogFormVisible=!0}if("系统测试缺陷(个数)"===a.name){var l={pid:e.bigValue1,sub_pid:e.samllValue1,years:e.years1};e.sendMsg("http://10.1.41.99:8080/detail/bugs",l,!0,!0),t.dialogFormVisible=!0}if("单元测试覆盖率(百分比)"===a.name){var s={pid:e.bigValue1,sub_pid:e.samllValue1,years:e.years1};e.sendMsg("http://10.1.41.99:8080/detail/ut",s,!0,!0),t.dialogFormVisible=!0}if("投入工时总数"===a.name){var n={pid:e.bigValue1,sub_pid:e.samllValue1,years:e.years1};e.sendMsg("http://10.1.41.99:8080/detail/cost",n,!0,!0),t.dialogFormVisible=!0}})},barGraph:function(){this.$echarts.init(document.getElementById("bigMy1")).setOption({title:{text:"版本成本+质量(TOP5)",textStyle:{color:"#666666",fontSize:12}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{top:30,textStyle:{fontSize:8,color:"#666666"},itemGap:3,itemWidth:15,itemHeight:10,data:["代码质量分析(个数)","现网缺陷(个数)","系统测试缺陷(个数)","单元测试覆盖率(百分比)","投入工时总数"],selectedMode:!1},grid:{top:"30%",left:"3%",right:"4%",bottom:"0%",containLabel:!0},xAxis:[{type:"category",data:this.bigtop5Name,axisPointer:{textStyle:{fontSize:10},type:"shadow"},axisLine:{lineStyle:{width:.5}},axisLabel:{interval:0,rotate:30,textStyle:{fontSize:8}}}],yAxis:[{type:"value",name:"个数",axisLabel:{textStyle:{fontSize:10},formatter:"{value}"},splitLine:{lineStyle:{type:"dotted"}},axisLine:{lineStyle:{width:.5}},nameTextStyle:{fontSize:10,fontWeight:"bold"}},{type:"value",name:"百分比",axisLabel:{textStyle:{fontSize:10},formatter:"{value}%"},splitLine:{show:!1},nameTextStyle:{fontSize:10,fontWeight:"bold"},axisLine:{lineStyle:{width:.5}}}],series:[{name:"投入工时总数",type:"bar",barWidth:15,color:"#91c7ae",data:this.bigtop5Data5},{name:"单元测试覆盖率(百分比)",type:"line",yAxisIndex:1,itemStyle:{normal:{lineStyle:{width:2,color:"#a9c584"}}},data:this.bigtop5Data4},{name:"系统测试缺陷(个数)",type:"line",yAxisIndex:1,itemStyle:{normal:{lineStyle:{width:2,color:"#57a8e7"}}},data:this.bigtop5Data3},{name:"现网缺陷(个数)",type:"line",yAxisIndex:1,itemStyle:{normal:{lineStyle:{width:2,color:"#f1705c"}}},data:this.bigtop5Data2},{name:"代码质量分析(个数)",type:"line",yAxisIndex:1,itemStyle:{normal:{lineStyle:{width:2,color:"#ac8cbf"}}},data:this.bigtop5Data1}]})},sureBig:function(){var t=this;this.bigtop5Name=[],this.bigtop5Data1=[],this.bigtop5Data2=[],this.bigtop5Data3=[],this.bigtop5Data4=[],this.bigtop5Data5=[],this.$http.post("http://10.1.41.99:8080/report/top5",{limits:200}).then(function(e){t.dialogFormCharts=!0,e.data.data.map(function(e,a){t.bigtop5Name.push(e.pname),t.bigtop5Data1.push(e.codeQuality),t.bigtop5Data2.push(e.bugs),t.bigtop5Data3.push(e.testBugs),t.bigtop5Data4.push(e.ut),t.bigtop5Data5.push(e.manHaur)}),setTimeout(function(){t.barGraph()},5)}).catch(function(t){console.log(t,"err错误")})},way1:function(t){var e=this;this.top5Name=[],this.top5Data1=[],this.top5Data2=[],this.top5Data3=[],this.top5Data4=[],this.top5Data5=[],this.$http.post("http://10.1.41.99:8080/report/top5",t).then(function(t){t.data.data.map(function(t,a){e.top5Name.push(t.pname),e.top5Data1.push(t.codeQuality),e.top5Data2.push(t.bugs),e.top5Data3.push(t.testBugs),e.top5Data4.push(t.ut),e.top5Data5.push(t.manHaur)}),e.drawLine()}).catch(function(t){console.log(t,"err错误")})},way2:function(t){var e=this;this.$http.post("http://10.1.41.99:8080/report/progress",t).then(function(t){e.roundData4=t.data.data.delayDeveloping,e.roundData3=t.data.data.delayReleased,e.roundData2=t.data.data.developing,e.roundData1=t.data.data.released;var a=e.roundData1+e.roundData2+e.roundData3+e.roundData4;e.roundData=((e.roundData1+e.roundData2)/a*100).toFixed(0),e.color1=Number((e.roundData1/a).toFixed(1)),e.color2=e.color1+Number((e.roundData2/a).toFixed(1)),e.color3=e.color2+Number((e.roundData3/a).toFixed(1)),e.color4=e.color3+Number((e.roundData4/a).toFixed(1)),e.drawRound()}).catch(function(t){console.log(t,"err错误")})}},mounted:function(){var t=this;this.$http.post("http://10.1.41.99:8080/base/project",{}).then(function(e){e.data.data.map(function(e,a){t.optionsBig.push({value:e.pid,label:e.pname}),t.options.push({id:e.pid,value:e.subPid,label:e.subPname})})}).catch(function(t){console.log(t,"err错误")}),this.way1({}),this.way2({})}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"index"},[a("div",{staticClass:"header"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"header-title"},[t._v("研发管理看板")])]),t._v(" "),a("el-col",{staticClass:"pull-right",attrs:{span:12}},[a("div",[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.queryMsg,expression:"queryMsg"}],staticClass:"el-input__inner header-input",attrs:{type:"text",placeholder:"查询","suffix-icon":"el-icon-date"},domProps:{value:t.queryMsg},on:{input:function(e){e.target.composing||(t.queryMsg=e.target.value)}}}),t._v(" "),a("i",{staticClass:"el-icon-search"})]),t._v(" "),a("el-button",{staticClass:"header-search",attrs:{type:"danger"},on:{click:t.queryData}},[t._v("查询")])],1)])],1)],1),t._v(" "),a("div",{staticClass:"body"},[a("el-row",[a("el-col",{attrs:{span:7}},[t._v("\n          大项目"),a("el-select",{staticClass:"body-selected",attrs:{"value-key":"value",placeholder:"全部",size:"mini"},on:{change:t.bigProject},model:{value:t.bigValue,callback:function(e){t.bigValue=e},expression:"bigValue"}},t._l(t.optionsBig,function(t,e){return a("el-option",{key:e,attrs:{"popper-class":"popper-option",label:t.label,value:t.value}})}))],1),t._v(" "),a("el-col",{attrs:{span:7}},[t._v("\n        子项目"),a("el-select",{staticClass:"body-selected",attrs:{placeholder:"全部",size:"mini",disabled:!t.isDisabled},on:{change:t.samllProject},model:{value:t.samllValue,callback:function(e){t.samllValue=e},expression:"samllValue"}},t._l(t.optionsSmall,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-col",{attrs:{span:7}},[t._v("\n       项目年份"),a("el-select",{staticClass:"body-selected",attrs:{placeholder:"全部",size:"mini"},on:{change:t.changeTime},model:{value:t.timeValue,callback:function(e){t.timeValue=e},expression:"timeValue"}},t._l(t.optionsTime,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.label}})}))],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{staticClass:"body-sure",attrs:{type:"warning"},on:{click:t.sureQuery}},[t._v("确定")])],1)],1)],1),t._v(" "),a("div",{staticClass:"echarts"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{attrs:{id:"myChart"}})]),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-button",{staticClass:"btn",attrs:{type:"text",size:"mini"},on:{click:t.sureBig}},[t._v("更多")]),t._v(" "),a("div",{attrs:{id:"myCharts"}})],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"版本进度详情",center:!0,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData1,border:""}},[a("el-table-column",{attrs:{prop:"pname",label:"大项目名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"subPname",label:"子项目名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"num",label:"版本号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"startDate",label:"版本开始时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"endDate",label:"版本结束时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"版本状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:{"text-dangerous":"3"==e.row.status,"text-dangerous":"4"==e.row.status,"text-succeed":"1"==e.row.status,"text-progress":"2"==e.row.status}},[t._v(t._s(t.filterProgress(e.row.status)))])]}}])})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.pageShow,expression:"pageShow"}],staticClass:"pageNation"},[a("el-pagination",{attrs:{background:"","current-page":t.pageInfo.page,"page-size":t.pageInfo.size,layout:"prev, pager, next",total:t.pageInfo.count},on:{"current-change":t.jumpTo}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"版本进度详情",center:!0,visible:t.dialogFormVisible1},on:{"update:visible":function(e){t.dialogFormVisible1=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData1,border:""}},[a("el-table-column",{attrs:{prop:"demand",label:"大项目名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"num",label:"版本号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"quantity",label:"版本号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"版本状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:{"text-dangerous":"3"==e.row.status,"text-dangerous":"4"==e.row.status,"text-succeed":"1"==e.row.status,"text-progress":"2"==e.row.status}},[t._v(t._s(t.filterProgress(e.row.status)))])]}}])})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.pageShow,expression:"pageShow"}],staticClass:"pageNation"},[a("el-pagination",{attrs:{background:"","current-page":t.pageInfo.page,"page-size":t.pageInfo.size,layout:"prev, pager, next",total:t.pageInfo.count},on:{"current-change":t.jumpTo}})],1)],1),t._v(" "),a("el-dialog",{staticClass:"echars-body",attrs:{title:"详细信息",center:!0,visible:t.dialogFormCharts},on:{"update:visible":function(e){t.dialogFormCharts=e}}},[a("div",{attrs:{id:"bigMy1"}})])],1)},staticRenderFns:[]};var d=a("VU/8")(u,p,!1,function(t){a("xs75")},"data-v-df73f2f0",null).exports;l.default.use(r.a);var c=new r.a({routes:[{path:"/",name:"HelloWorld",component:d}]}),h=(a("4kSj"),a("XLwt")),m=a.n(h),g=(a("sVYa"),a("mtWM")),b=a.n(g);l.default.prototype.$http=b.a,l.default.prototype.$echarts=m.a,l.default.use(o.a),l.default.config.productionTip=!1,new l.default({el:"#app",router:c,components:{App:n},template:"<App/>"})},kZ0m:function(t,e){},tvR6:function(t,e){},xs75:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.51ab864f0f0ea1959680.js.map